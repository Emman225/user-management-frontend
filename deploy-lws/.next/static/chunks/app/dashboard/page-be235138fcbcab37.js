(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>a});var s=r(5155);let a=r(2115).forwardRef((e,t)=>{let{className:r="",variant:a="default",size:n="default",children:o,...l}=e;return(0,s.jsx)("button",{className:"".concat("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background"," ").concat({default:"bg-primary text-primary-foreground hover:bg-primary/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"}[a]," ").concat({default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}[n]," ").concat(r),ref:t,...l,children:o})});a.displayName="Button"},638:(e,t,r)=>{"use strict";r.d(t,{e9:()=>a}),r(9509);let s={apiUrl:"http://192.168.5.195:8283/api"},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=s.apiUrl.replace(/\/$/,"");if(console.log("Base URL de l'API:",t),!e)return t;let r=e.replace(/^\//,"");return"".concat(t,"/").concat(r)}},983:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(5155),a=r(2115),n=r(5695);function o(e){let{children:t}=e,r=(0,n.useRouter)(),[o,l]=(0,a.useState)(!1),[i,c]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{sessionStorage.getItem("token")?(l(!0),c(!1)):(console.error("❌ Aucun token trouv\xe9 - Redirection vers login"),r.push("/login"))},[r]),i)?(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?t:null}},2383:()=>{},3686:()=>{},4352:(e,t,r)=>{Promise.resolve().then(r.bind(r,4540))},4540:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var s=r(5155),a=r(6268),n=r(1032),o=r(2115),l=r(285),i=r(1788),c=r(408),d=r.n(c),u=r(3925),x=r(6597),g=r(6118);function h(e){let{columns:t,data:r,customFilters:c,exportFileName:h="data",exportSheetName:m="Donn\xe9es",columnFilters:p=[],onColumnFiltersChange:f,showExport:v=!0}=e,[b,j]=(0,o.useState)([]),[y,w]=(0,o.useState)(""),[N,k]=(0,o.useState)([]),S=p.length>0?p:N,C=(0,a.N4)({data:r,columns:t,state:{sorting:b,globalFilter:y,columnFilters:S},onSortingChange:j,onGlobalFilterChange:w,onColumnFiltersChange:f||k,getCoreRowModel:(0,n.HT)(),getSortedRowModel:(0,n.h5)(),getPaginationRowModel:(0,n.kW)(),getFilteredRowModel:(0,n.hM)(),initialState:{pagination:{pageSize:10}}}),A=C.getFilteredRowModel().rows.map(e=>e.original);return(0,s.jsxs)("div",{className:"space-y-3 p-0 md:p-2 overflow-x-auto",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 bg-white rounded-lg p-3 shadow-sm",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Rechercher...",value:null!=y?y:"",onChange:e=>w(e.target.value),className:"w-full md:w-64 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),(0,s.jsx)("svg",{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[c,v&&(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsxs)("button",{className:"flex items-center gap-2 bg-blue-600 text-white rounded-lg px-3 py-2 text-sm hover:bg-blue-700 transition-all",children:[(0,s.jsx)(i.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Exporter"})]}),(0,s.jsxs)("div",{className:"absolute right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg hidden group-hover:block z-10 min-w-[150px]",children:[(0,s.jsx)("button",{className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-50 transition-colors",onClick:()=>{let e=new Blob([d().unparse(A)],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.setAttribute("download","".concat(h,".csv")),document.body.appendChild(r),r.click(),document.body.removeChild(r)},children:"CSV"}),(0,s.jsx)("button",{className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-50 transition-colors",onClick:()=>{let e=u.Wp.json_to_sheet(A),t=u.Wp.book_new();u.Wp.book_append_sheet(t,e,m),u._h(t,"".concat(h,".xlsx"))},children:"Excel"}),(0,s.jsx)("button",{className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-50 transition-colors",onClick:()=>{let e=new x.Ay;e.text("Liste des ".concat(m),14,16);let r=t.filter(e=>"actions"!==e.id),s=r.map(e=>{let t=e.header;return"string"==typeof t?t:e.id||"Colonne"}),a=A.map(e=>{let t=[];return r.forEach(r=>{let s="";try{if("accessorKey"in r&&r.accessorKey){let t=r.accessorKey;s=String(e[t]||"")}else if("accessorFn"in r&&r.accessorFn){let t=r.accessorFn;s=String(t(e)||"")}else s=r.id&&e[r.id]?String(e[r.id]||""):""}catch(e){s=""}t.push(s)}),t});(0,g.Ay)(e,{startY:22,head:[s],body:a}),e.save("".concat(h,".pdf"))},children:"PDF"})]})]})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-black",children:C.getHeaderGroups().map(e=>(0,s.jsx)("tr",{children:e.headers.map(e=>(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-white uppercase tracking-wider cursor-pointer hover:bg-gray-800 transition-colors",onClick:e.column.getToggleSortingHandler(),children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.Kv)(e.column.columnDef.header,e.getContext()),(0,s.jsxs)("span",{className:"text-gray-400",children:["asc"===e.column.getIsSorted()?"↑":"","desc"===e.column.getIsSorted()?"↓":""]})]})},e.id))},e.id))}),(0,s.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[C.getRowModel().rows.map(e=>(0,s.jsx)("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:e.getVisibleCells().map(e=>(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:(0,a.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)),0===C.getRowModel().rows.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:t.length,className:"text-center py-8 text-gray-500",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("svg",{className:"w-12 h-12 text-gray-300 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Aucune donn\xe9e trouv\xe9e"})]})})})]})]})})}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-3 bg-white rounded-lg p-3 shadow-sm",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:C.getFilteredRowModel().rows.length>0?(0,s.jsxs)(s.Fragment,{children:[C.getState().pagination.pageIndex*C.getState().pagination.pageSize+1," -"," ",Math.min((C.getState().pagination.pageIndex+1)*C.getState().pagination.pageSize,C.getFilteredRowModel().rows.length)," ","sur ",C.getFilteredRowModel().rows.length]}):"0 sur 0"}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>C.setPageIndex(0),disabled:!C.getCanPreviousPage(),className:"px-2 py-1 text-xs",children:"\xab"}),(0,s.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>C.previousPage(),disabled:!C.getCanPreviousPage(),className:"px-2 py-1 text-xs",children:"‹"}),(0,s.jsxs)("span",{className:"flex items-center px-2 text-xs",children:[C.getState().pagination.pageIndex+1," / ",C.getPageCount()]}),(0,s.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>C.nextPage(),disabled:!C.getCanNextPage(),className:"px-2 py-1 text-xs",children:"›"}),(0,s.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>C.setPageIndex(C.getPageCount()-1),disabled:!C.getCanNextPage(),className:"px-2 py-1 text-xs",children:"\xbb"})]})]})]})}var m=r(4020),p=r(2657),f=r(3717),v=r(2525),b=r(2318),j=r(5695),y=r(5060),w=r(4615),N=r(6821),k=r(983);function S(e){let{value:t,onChange:r}=e;return(0,s.jsxs)("select",{value:t,onChange:e=>r(e.target.value),className:"border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[(0,s.jsx)("option",{value:"",children:"Tous les r\xf4les"}),(0,s.jsx)("option",{value:"admin",children:"Admin"}),(0,s.jsx)("option",{value:"user",children:"Utilisateur"})]})}function C(e){let{value:t,onChange:r}=e;return(0,s.jsxs)("select",{value:t,onChange:e=>r(e.target.value),className:"border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[(0,s.jsx)("option",{value:"",children:"Tous les statuts"}),(0,s.jsx)("option",{value:"1",children:"Actif"}),(0,s.jsx)("option",{value:"0",children:"Inactif"})]})}var A=r(3464),E=r(8735),R=r(638),z=r(4752),M=r.n(z);let _=e=>(0,s.jsx)("span",{className:"".concat("px-3 py-1 rounded-full text-xs font-semibold"," ").concat({1:"bg-green-100 text-green-700",0:"bg-red-100 text-red-700"}[e]||"bg-gray-100 text-gray-700"),children:1===e?"Actif":"Inactif"}),I=e=>(0,s.jsx)("span",{className:"".concat("px-3 py-1 rounded-full text-xs font-semibold"," ").concat({admin:"bg-purple-100 text-purple-700",user:"bg-blue-100 text-blue-700"}[e]||"bg-gray-100 text-gray-700"),children:e}),L=e=>{let{onView:t,onEdit:r,onDelete:a,userRole:n}=e,[l,i]=(0,o.useState)(!1),c=(0,o.useRef)(null);(0,o.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&i(!1)};return l&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[l]);let d="admin"===n;return(0,s.jsxs)("div",{className:"relative",ref:c,children:[d&&(0,s.jsx)("button",{className:"p-2 rounded-full hover:bg-gray-100",onClick:()=>i(e=>!e),children:(0,s.jsx)(m.A,{size:20})}),l&&d&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-36 bg-white border rounded-lg shadow-lg z-10",children:[(0,s.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 w-full hover:bg-gray-50 text-sm",onClick:()=>{i(!1),t()},children:[(0,s.jsx)(p.A,{size:16})," Voir"]}),(0,s.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 w-full hover:bg-gray-50 text-sm",onClick:()=>{i(!1),r()},children:[(0,s.jsx)(f.A,{size:16})," Modifier"]}),(0,s.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 w-full hover:bg-gray-50 text-sm text-red-600",onClick:()=>{i(!1),a()},children:[(0,s.jsx)(v.A,{size:16})," Supprimer"]})]})]})},F=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);function P(){let e=(0,j.useRouter)(),[t,r]=(0,o.useState)([]),[a,n]=(0,o.useState)(!0),[i,c]=(0,o.useState)(""),[d,u]=(0,o.useState)(""),[x,g]=(0,o.useState)(""),[m,p]=(0,o.useState)([]),[f,v]=(0,o.useState)(null);(0,o.useEffect)(()=>{try{let e=sessionStorage.getItem("user");if(e){let t=JSON.parse(e);v(t.role)}}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration du r\xf4le:",e)}},[]),(0,o.useEffect)(()=>{(async()=>{try{n(!0);let s=sessionStorage.getItem("token");if((0,R.e9)(),!s){console.error("❌ Aucun token trouv\xe9 dans sessionStorage - Redirection vers login"),e.push("/login");return}try{let e=await A.A.get((0,R.e9)("/users"),{headers:{Authorization:"Bearer ".concat(s),Accept:"application/json","Content-Type":"application/json"},timeout:15e3});e.data&&!0===e.data.status&&e.data.data&&Array.isArray(e.data.data.users)?r(e.data.data.users):e.data&&Array.isArray(e.data)?r(e.data):(console.warn("⚠️ Format de r\xe9ponse inattendu:",e.data),r([]))}catch(r){var t;if(console.error("❌ Erreur de requ\xeate API:",r),(null==(t=r.response)?void 0:t.status)===401){console.error("\uD83D\uDD10 Token expir\xe9 ou invalide - Nettoyage et redirection"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),e.push("/login");return}throw r}}catch(t){if(console.error("❌ Erreur lors du chargement des utilisateurs:",t),t.response&&(401===t.response.status||403===t.response.status)){console.error("\uD83D\uDD10 Token invalide ou expir\xe9 - Redirection vers login"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),e.push("/login");return}r([])}finally{n(!1)}})()},[i,e]);let k=async(e,t)=>{try{let s=sessionStorage.getItem("token");if((await M().fire({title:"\xcates-vous s\xfbr ?",text:"Voulez-vous vraiment supprimer l'utilisateur \"".concat(t,'" ? Cette action est irr\xe9versible.'),icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer !",cancelButtonText:"Annuler"})).isConfirmed){let t=await A.A.delete((0,R.e9)("/users/".concat(e)),{headers:{Authorization:"Bearer ".concat(s),Accept:"application/json"}});if(t.data.status){M().fire({icon:"success",title:"Supprim\xe9 !",text:t.data.message||"L'utilisateur a \xe9t\xe9 supprim\xe9 avec succ\xe8s."});let e=await A.A.get((0,R.e9)("/users"),{headers:{Authorization:"Bearer ".concat(s),Accept:"application/json"}});e.data&&!0===e.data.status&&Array.isArray(e.data.data)?r(e.data.data):e.data&&Array.isArray(e.data)&&r(e.data)}else throw Error(t.data.message||"Erreur lors de la suppression")}}catch(t){var s,a,n,o;console.error("Erreur lors de la suppression de l'utilisateur:",t);let e="Erreur lors de la suppression de l'utilisateur";(null==(a=t.response)||null==(s=a.data)?void 0:s.message)?e=t.response.data.message:(null==(o=t.response)||null==(n=o.data)?void 0:n.errors)&&(e=Object.values(t.response.data.errors).flat().join(", ")),M().fire({icon:"error",title:"Erreur",text:e})}};(0,o.useEffect)(()=>{let e=[];d&&e.push({id:"role",value:d}),x&&e.push({id:"active",value:parseInt(x)}),p(e)},[d,x]);let z=[{accessorKey:"name",header:"Nom",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[t.original.profile_photo_url?(0,s.jsx)("img",{src:t.original.profile_photo_url,alt:t.original.name,className:"w-9 h-9 rounded-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,s.jsx)("span",{className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center text-sm font-bold text-gray-600",style:{display:t.original.profile_photo_url?"none":"flex"},children:F(t.original.name)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold text-black",children:t.original.name}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:t.original.email})]})]})}},{accessorKey:"email",header:"Email",cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"text-sm",children:t.original.email})}},{accessorKey:"role",header:"R\xf4le",cell:e=>{let{row:t}=e;return I(t.original.role)}},{accessorKey:"active",header:"Statut",cell:e=>{let{row:t}=e;return _(t.original.active)},filterFn:(e,t,r)=>void 0===r||""===r||e.getValue(t)===r},{accessorKey:"created_at",header:"Date de cr\xe9ation",cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"text-sm",children:new Date(t.original.created_at).toLocaleDateString("fr-FR")})}},{id:"actions",header:"Actions",cell:t=>{let{row:r}=t;return(0,s.jsx)(L,{onView:()=>e.push("/dashboard/detail/".concat(r.original.id)),onEdit:()=>e.push("/dashboard/modifier/".concat(r.original.id)),onDelete:()=>k(r.original.id,r.original.name),userRole:f})}}],P=(0,E._m)("admin");return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,s.jsx)(y.A,{}),(0,s.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,s.jsx)(w.A,{}),(0,s.jsx)("main",{className:"flex-1 p-6 overflow-auto",children:(0,s.jsxs)("div",{className:"mx-auto max-w-6xl px-2 sm:px-4 md:px-8 pt-8 pb-2",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Liste des Utilisateurs"}),(0,s.jsx)("div",{className:"text-muted-foreground text-base mt-1",children:"G\xe9rez les utilisateurs de votre application"})]}),P&&(0,s.jsxs)(l.$,{onClick:()=>e.push("/dashboard/creer"),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-lg flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[(0,s.jsx)(b.A,{size:16}),(0,s.jsx)("span",{className:"font-semibold",children:"Ajouter un Utilisateur"})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm",children:a?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,s.jsx)(h,{data:t,columns:z,columnFilters:m,onColumnFiltersChange:p,exportFileName:"utilisateurs",exportSheetName:"Utilisateurs",showExport:(0,E._m)("admin"),customFilters:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S,{value:d,onChange:u}),(0,s.jsx)(C,{value:x,onChange:g})]})})})]})}),(0,s.jsx)(N.A,{})]})]})}function B(){return(0,s.jsx)(k.A,{children:(0,s.jsx)(P,{})})}},4615:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(5155),a=r(2115),n=r(5695),o=r(6766),l=r(638);function i(){let[e,t]=(0,a.useState)(!1),[r,i]=(0,a.useState)("Utilisateur"),[c,d]=(0,a.useState)("/profile.png"),u=(0,a.useRef)(null),x=(0,n.useRouter)();(0,a.useEffect)(()=>{try{let e=sessionStorage.getItem("user");if(e){let t=JSON.parse(e);i(t.name||"Utilisateur"),d(t.profile_photo_url||"/profile.png")}}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des informations utilisateur:",e)}},[]),(0,a.useEffect)(()=>{function e(e){u.current&&!u.current.contains(e.target)&&t(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let g=async e=>{e.preventDefault();try{let e=sessionStorage.getItem("token"),t=await fetch((0,l.e9)("/logout"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json","Content-Type":"application/json"}}),r=await t.json();!0===r.status?console.log("D\xe9connexion r\xe9ussie:",r.message):console.error("Erreur lors de la d\xe9connexion:",r.message)}catch(e){console.error("Erreur lors de la d\xe9connexion :",e)}finally{sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),x.push("/login")}};return(0,s.jsxs)("header",{className:"bg-[#3a57e8] text-white flex items-center justify-end h-16 px-4 border-b border-gray-200 rounded-bl-lg",children:[(0,s.jsx)("button",{className:"md:hidden text-gray-600 focus:outline-none mr-4","aria-label":"Toggle sidebar",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,s.jsxs)("div",{className:"relative",ref:u,children:[(0,s.jsxs)("button",{onClick:()=>t(!e),className:"flex items-center gap-2 focus:outline-none","aria-haspopup":"true","aria-expanded":e,children:[(0,s.jsx)(o.default,{src:c,alt:"Profil",width:40,height:40,className:"h-10 rounded-full object-cover"}),(0,s.jsx)("span",{className:"text-white font-medium",children:r}),(0,s.jsx)("svg",{className:"w-4 h-4 text-white transition-transform duration-200 ".concat(e?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e&&(0,s.jsx)("div",{className:"absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded shadow-lg z-10",children:(0,s.jsxs)("a",{href:"#",onClick:g,className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-100",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 12H6"})}),"D\xe9connexion"]})})]})]})}},5060:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(5155),a=r(2115),n=r(5695),o=r(6766),l=r(8735);let i=[{title:"Dashboard",icon:"<svg class='w-4 h-4' fill='none' stroke='currentColor' strokeWidth='2' viewBox='0 0 24 24'><path d='M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8v-10h-8v10zm0-18v6h8V3h-8z'/></svg>",link:"/dashboard"},{title:"Journal",icon:"<svg class='w-4 h-4' fill='none' stroke='currentColor' strokeWidth='2' viewBox='0 0 24 24'><path d='M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z'/></svg>",link:"/dashboard/logs",requiredRole:"admin"}];function c(){let e=(0,n.usePathname)(),t=(0,n.useRouter)(),[r,c]=(0,a.useState)(!1),d=r=>{r!==e&&(c(!0),t.push(r))};return(0,s.jsxs)("aside",{className:"bg-gray-900 text-gray-300 w-56 flex flex-col font-sans border-r border-gray-200 min-h-screen rounded-tr-lg rounded-br-lg",children:[(0,s.jsx)("div",{className:"flex items-center justify-center h-16 border-b border-gray-700 px-4",children:(0,s.jsx)(o.default,{src:"/logo.png",alt:"User Management",width:48,height:48,className:"h-12 w-auto object-contain"})}),r&&(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"loader ease-linear rounded-full border-8 border-t-8 border-gray-200 h-12 w-12"})}),(0,s.jsx)("nav",{className:"flex-1 overflow-y-auto p-2",children:(0,s.jsx)("ul",{className:"space-y-1",children:i.map((t,r)=>!t.requiredRole||(0,l._m)(t.requiredRole)?(0,s.jsx)("li",{children:t.link&&(0,s.jsxs)("button",{onClick:()=>d(t.link),className:"flex items-center w-full text-left rounded px-2 py-2 gap-2 focus:outline-none ".concat(e===t.link?"font-bold bg-[#f0f3ff] text-[#3a57e8]":"hover:bg-[#f0f3ff] hover:text-[#3a57e8]"),children:[(0,s.jsx)("span",{className:"icon-sidebar",dangerouslySetInnerHTML:{__html:t.icon}}),(0,s.jsx)("span",{className:"text-sm",children:t.title})]})},r):null)})}),(0,s.jsx)("style",{children:"\n        .loader {\n          border-top-color: #3a57e8;\n          animation: spinner 1.5s linear infinite;\n        }\n        @keyframes spinner {\n          to { transform: rotate(360deg); }\n        }\n      "})]})}},6821:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155);function a(){return(0,s.jsxs)("footer",{className:"flex justify-between items-center h-12 px-6 bg-white border-t border-gray-200 text-xs text-gray-600 select-none",children:[(0,s.jsx)("div",{children:"2025 \xa9 USER-MANAGEMENT."}),(0,s.jsx)("div",{children:"Con\xe7u par LCI"})]})}},8735:(e,t,r)=>{"use strict";r.d(t,{_m:()=>a});let s=()=>{try{let e=sessionStorage.getItem("user");if(!e)return null;return JSON.parse(e).role||null}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration du r\xf4le:",e),null}},a=e=>{let t=s();return!!t&&(Array.isArray(e)?e.includes(t):t===e)}}},e=>{var t=t=>e(e.s=t);e.O(0,[320,524,930,659,753,441,684,358],()=>t(4352)),_N_E=e.O()}]);