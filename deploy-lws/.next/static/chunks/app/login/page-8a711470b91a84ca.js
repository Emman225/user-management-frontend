(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{638:(e,s,t)=>{"use strict";t.d(s,{e9:()=>a}),t(9509);let r={apiUrl:"http://192.168.5.195:8283/api"},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=r.apiUrl.replace(/\/$/,"");if(console.log("Base URL de l'API:",s),!e)return s;let t=e.replace(/^\//,"");return"".concat(s,"/").concat(t)}},3257:()=>{},8331:(e,s,t)=>{Promise.resolve().then(t.bind(t,9690))},9690:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(5155),a=t(6766),l=t(5695),n=t(2115),o=t(4752),i=t.n(o),c=t(3464),d=t(638);function u(){let e=(0,l.useRouter)(),[s,t]=(0,n.useState)(""),[o,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1),p=async t=>{t.preventDefault(),x(!0);try{let{data:t}=await c.A.post((0,d.e9)("/login"),{email:s,password:o});t.status&&t.data&&t.data.token?(sessionStorage.setItem("token",t.data.token),sessionStorage.setItem("user",JSON.stringify(t.data.user)),e.push("/dashboard")):i().fire({icon:"error",title:"Erreur de connexion",text:t.message||"Erreur lors de la connexion"})}catch(s){let e="Erreur lors de la connexion";if("object"==typeof s&&null!==s&&"response"in s){if(s.response){let{status:t,data:r}=s.response;if("object"==typeof r&&null!==r&&"message"in r)switch(t){case 401:e=r.message||"Email ou mot de passe incorrect";break;case 403:e=r.message||"Votre compte est d\xe9sactiv\xe9. Contactez l'administrateur.";break;case 422:e=r.message||"Erreur de validation des donn\xe9es",r.errors&&(e+=": "+Object.values(r.errors).flat().join(", "));break;case 500:e="Erreur interne du serveur. Veuillez r\xe9essayer plus tard.";break;default:e=r.message||"Erreur de connexion"}else switch(t){case 401:e="Email ou mot de passe incorrect";break;case 403:e="Votre compte est d\xe9sactiv\xe9. Contactez l'administrateur.";break;case 422:e="Erreur de validation des donn\xe9es";break;case 500:e="Erreur interne du serveur. Veuillez r\xe9essayer plus tard.";break;default:e="Erreur de connexion"}}}else e="object"==typeof s&&null!==s&&"request"in s?"Impossible de se connecter au serveur. V\xe9rifiez votre connexion internet.":"Erreur de configuration de la requ\xeate";i().fire({icon:"error",title:"Erreur de connexion",text:e})}finally{x(!1)}};return(0,r.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100 page-bg",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md w-full max-w-sm",children:[(0,r.jsx)("div",{className:"flex items-center justify-center mb-3",children:(0,r.jsx)(a.default,{src:"/logon_EDN_erp.png",alt:"Logo",width:120,height:120,className:"rounded-full"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-center mb-4",children:"Se connecter"}),(0,r.jsxs)("form",{onSubmit:p,className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,r.jsx)("input",{type:"email",placeholder:"Entrez votre adresse email",className:"mt-1 block w-full border border-gray-300 rounded-md p-2",value:s,onChange:e=>t(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),(0,r.jsx)("input",{type:"password",placeholder:"Entrez le mot de passe",className:"mt-1 block w-full border border-gray-300 rounded-md p-2",value:o,onChange:e=>u(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",className:"mr-2"}),"Souviens-toi de moi"]}),(0,r.jsx)("a",{href:"#",className:"text-sm text-blue-600",children:"Mot de passe oubli\xe9 ?"})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-md disabled:bg-blue-400 disabled:cursor-not-allowed",disabled:m,children:m?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Connexion..."]}):"Se connecter"})]}),(0,r.jsx)("div",{className:"text-center mt-4",children:(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Besoin d'un compte ? ",(0,r.jsx)("a",{href:"#",className:"text-blue-600",children:"Inscrivez-vous"})]})})]})})}t(3257)}},e=>{var s=s=>e(e.s=s);e.O(0,[504,320,659,441,684,358],()=>s(8331)),_N_E=e.O()}]);