(()=>{var e={};e.id=293,e.ids=[293],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7319:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>j});var t=r(60687),a=r(43210),i=r(29523),l=r(28559),o=r(23026),n=r(16023),d=r(99154),c=r(21891),m=r(51317),p=r(56367),u=r(51060),x=r(16189),h=r(53360),f=r(77567);function b(){let e=(0,x.useRouter)(),s=(0,a.useRef)(),[r,p]=(0,a.useState)(!1),[b,j]=(0,a.useState)({name:"",email:"",password:"",password_confirmation:"",role:"user",active:!0,profile_photo:null}),g=e=>{let{name:s,value:r,type:t,checked:a}=e.target;j(e=>({...e,[s]:"checkbox"===t?a:r}))},v=async s=>{s.preventDefault(),p(!0);try{let s=sessionStorage.getItem("token"),r=new FormData;r.append("name",b.name),r.append("email",b.email),r.append("password",b.password),r.append("password_confirmation",b.password_confirmation),r.append("role",b.role),r.append("active",b.active?"1":"0"),b.profile_photo&&r.append("profile_photo",b.profile_photo);let t=await u.A.post((0,h.e9)("/users"),r,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"multipart/form-data",Accept:"application/json"}});if(t.data.status)f.A.fire({icon:"success",title:"Succ\xe8s",text:t.data.message||"Utilisateur cr\xe9\xe9 avec succ\xe8s"}),e.push("/dashboard");else throw Error(t.data.message||"Erreur lors de la cr\xe9ation")}catch(s){console.error("Erreur cr\xe9ation utilisateur:",s);let e="Erreur lors de la cr\xe9ation de l'utilisateur";s.response?.data?.errors?e=Object.values(s.response.data.errors).flat().join(", "):s.response?.data?.message&&(e=s.response.data.message),f.A.fire({icon:"error",title:"Erreur",text:e})}finally{p(!1)}};return(0,t.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,t.jsx)(d.A,{}),(0,t.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,t.jsx)(c.A,{}),(0,t.jsx)("main",{className:"flex-1 p-6 overflow-auto",children:(0,t.jsxs)("div",{className:"mx-auto max-w-4xl px-2 sm:px-4 md:px-8 pt-8 pb-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Cr\xe9er un Utilisateur"}),(0,t.jsx)("div",{className:"text-muted-foreground text-base mt-1",children:"Ajouter un nouvel utilisateur au syst\xe8me"})]}),(0,t.jsxs)(i.$,{variant:"outline",onClick:()=>e.push("/dashboard"),disabled:r,className:"flex items-center gap-2",children:[(0,t.jsx)(l.A,{size:16}),"Retour"]})]}),(0,t.jsxs)("form",{onSubmit:v,className:"bg-white border rounded-xl p-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-3",children:"Photo de profil"}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full border flex items-center justify-center bg-gray-50 text-gray-400",children:b.profile_photo?(0,t.jsx)("img",{src:URL.createObjectURL(b.profile_photo),alt:"Preview",className:"w-full h-full rounded-full object-cover"}):(0,t.jsx)(o.A,{size:24,className:"sm:size-8"})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[(0,t.jsx)("input",{ref:s,type:"file",className:"hidden",accept:".jpeg,.png,.jpg,.gif",onChange:e=>{let s=e.target.files[0];if(s){if(s.size>2097152){f.A.fire({icon:"error",title:"Erreur",text:"La taille du fichier ne doit pas d\xe9passer 2MB"}),e.target.value="";return}if(!["image/jpeg","image/png","image/jpg","image/gif"].includes(s.type)){f.A.fire({icon:"error",title:"Erreur",text:"Format de fichier non support\xe9. Utilisez JPEG, PNG ou GIF"}),e.target.value="";return}j(e=>({...e,profile_photo:s}))}}}),(0,t.jsxs)(i.$,{type:"button",variant:"outline",onClick:()=>s.current.click(),disabled:r,className:"w-full sm:w-auto",children:[(0,t.jsx)(n.A,{size:16,className:"mr-2"}),"Choisir une photo"]}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground text-center sm:text-left",children:".jpg/.png/.gif, 2Mo max."})]})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2 sm:col-span-1",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Nom complet *"}),(0,t.jsx)("input",{type:"text",name:"name",required:!0,className:"w-full border rounded px-3 py-2 text-sm sm:text-base",placeholder:"Nom complet",value:b.name,onChange:g,disabled:r})]}),(0,t.jsxs)("div",{className:"md:col-span-2 sm:col-span-1",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Email *"}),(0,t.jsx)("input",{type:"email",name:"email",required:!0,className:"w-full border rounded px-3 py-2 text-sm sm:text-base",placeholder:"email@exemple.com",value:b.email,onChange:g,disabled:r})]}),(0,t.jsxs)("div",{className:"md:col-span-2 sm:col-span-1",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Mot de passe *"}),(0,t.jsx)("input",{type:"password",name:"password",required:!0,minLength:8,className:"w-full border rounded px-3 py-2 text-sm sm:text-base",placeholder:"Minimum 8 caract\xe8res",value:b.password,onChange:g,disabled:r})]}),(0,t.jsxs)("div",{className:"md:col-span-2 sm:col-span-1",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Confirmer le mot de passe *"}),(0,t.jsx)("input",{type:"password",name:"password_confirmation",required:!0,className:"w-full border rounded px-3 py-2 text-sm sm:text-base",placeholder:"Confirmer le mot de passe",value:b.password_confirmation,onChange:g,disabled:r})]}),(0,t.jsxs)("div",{className:"md:col-span-2 sm:col-span-1",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"R\xf4le *"}),(0,t.jsxs)("select",{name:"role",required:!0,className:"w-full border rounded px-3 py-2 text-sm sm:text-base",value:b.role,onChange:g,disabled:r,children:[(0,t.jsx)("option",{value:"user",children:"Utilisateur"}),(0,t.jsx)("option",{value:"admin",children:"Administrateur"})]})]}),(0,t.jsx)("div",{className:"md:col-span-2 sm:col-span-1 flex items-center pt-4",children:(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",name:"active",className:"accent-primary size-4 sm:size-5",checked:b.active,onChange:g,disabled:r}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Utilisateur actif"})]})})]}),(0,t.jsx)("div",{className:"flex justify-end mt-8 pt-6 border-t",children:(0,t.jsx)(i.$,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2",disabled:r,children:r?(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Cr\xe9ation..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.A,{size:16,className:"mr-2"}),"Cr\xe9er l'Utilisateur"]})})})]})]})}),(0,t.jsx)(m.A,{})]})]})}function j(){return(0,t.jsx)(p.A,{children:(0,t.jsx)(b,{})})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},16023:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},23026:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},28559:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30389:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Doc\\\\user-management-frontend\\\\src\\\\app\\\\dashboard\\\\creer\\\\page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Doc\\user-management-frontend\\src\\app\\dashboard\\creer\\page.jsx","default")},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63613:(e,s,r)=>{Promise.resolve().then(r.bind(r,7319))},65454:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var t=r(65239),a=r(48088),i=r(88170),l=r.n(i),o=r(30893),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(s,n);let d={children:["",{children:["dashboard",{children:["creer",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,30389)),"D:\\Doc\\user-management-frontend\\src\\app\\dashboard\\creer\\page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"D:\\Doc\\user-management-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["D:\\Doc\\user-management-frontend\\src\\app\\dashboard\\creer\\page.jsx"],m={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/creer/page",pathname:"/dashboard/creer",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},68349:(e,s,r)=>{Promise.resolve().then(r.bind(r,30389))},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[825,873,567,653],()=>r(65454));module.exports=t})();