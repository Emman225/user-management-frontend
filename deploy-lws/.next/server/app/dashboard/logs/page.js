(()=>{var e={};e.id=181,e.ids=[181],e.modules={2236:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>o});var r=t(65239),a=t(48088),l=t(88170),n=t.n(l),i=t(30893),c={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let o={children:["",{children:["dashboard",{children:["logs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,54379)),"D:\\Doc\\user-management-frontend\\src\\app\\dashboard\\logs\\page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"D:\\Doc\\user-management-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["D:\\Doc\\user-management-frontend\\src\\app\\dashboard\\logs\\page.jsx"],x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/logs/page",pathname:"/dashboard/logs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31158:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},33873:e=>{"use strict";e.exports=require("path")},40018:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var r=t(60687),a=t(43210),l=t(62688);let n=(0,l.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var i=t(63143),c=t(88233);let o=(0,l.A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),d=(0,l.A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),x=(0,l.A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),u=(0,l.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var m=t(31158);let p=(0,l.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),h=(0,l.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),g=(0,l.A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),y=(0,l.A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),j=(0,l.A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),v=(0,l.A)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var f=t(29523);t(35381);var b=t(51060),N=t(53360);let E={POST_API_LOGIN:"POST_API/LOGIN",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILED:"LOGIN_FAILED",POST_API_USERS:"POST_API/USERS",USER_CREATE:"USER_CREATE",USER_UPDATE:"USER_UPDATE",USER_DELETE:"USER_DELETE",USER_VIEW:"USER_VIEW",SYSTEM:"SYSTEM"},A={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH"};function _(){let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)([]),[_,S]=(0,a.useState)({action:"",search:"",startDate:"",endDate:"",userId:"",method:""}),[k,P]=(0,a.useState)(!0),[T,D]=(0,a.useState)(!1),w=async()=>{P(!0);try{let e=sessionStorage.getItem("token");if(!e){console.error("Aucun token trouv\xe9"),P(!1);return}let t=(0,N.e9)("/logs");console.log("URL de l'API:",t),console.log("Token d'authentification:",e);let r=await b.A.get(t,{headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}});if(console.log("Logs r\xe9cup\xe9r\xe9s:",r.data),r.data&&!0===r.data.status&&Array.isArray(r.data.data.logs)){let e=r.data.data.logs.sort((e,s)=>new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime());s(e)}else console.error("Format de r\xe9ponse inattendu:",r.data),s([])}catch(e){console.error("Erreur lors du chargement des logs:",e),s([])}finally{P(!1)}},I=(e,s)=>{S(t=>({...t,[e]:s}))},U=e=>{switch(e){case E.USER_CREATE:return(0,r.jsx)(n,{size:16,className:"text-green-600"});case E.USER_UPDATE:return(0,r.jsx)(i.A,{size:16,className:"text-blue-600"});case E.USER_DELETE:return(0,r.jsx)(c.A,{size:16,className:"text-red-600"});case E.POST_API_LOGIN:case E.LOGIN_SUCCESS:case E.LOGIN_FAILED:return(0,r.jsx)(o,{size:16,className:"text-purple-600"});case E.POST_API_USERS:return(0,r.jsx)(d,{size:16,className:"text-orange-600"});default:return(0,r.jsx)(x,{size:16,className:"text-gray-600"})}},q=e=>{let s="px-2 py-1 rounded-full text-xs font-medium";switch(e){case"GET":return(0,r.jsx)("span",{className:`${s} bg-green-100 text-green-700`,children:"GET"});case"POST":return(0,r.jsx)("span",{className:`${s} bg-blue-100 text-blue-700`,children:"POST"});case"PUT":return(0,r.jsx)("span",{className:`${s} bg-yellow-100 text-yellow-700`,children:"PUT"});case"DELETE":return(0,r.jsx)("span",{className:`${s} bg-red-100 text-red-700`,children:"DELETE"});default:return(0,r.jsx)("span",{className:`${s} bg-gray-100 text-gray-700`,children:e})}},L=e=>({[E.POST_API_LOGIN]:"Requ\xeate Login API",[E.LOGIN_SUCCESS]:"Connexion r\xe9ussie",[E.LOGIN_FAILED]:"\xc9chec connexion",[E.POST_API_USERS]:"Requ\xeate Utilisateurs API",[E.USER_CREATE]:"Cr\xe9ation utilisateur",[E.USER_UPDATE]:"Modification utilisateur",[E.USER_DELETE]:"Suppression utilisateur",[E.USER_VIEW]:"Consultation utilisateur",[E.SYSTEM]:"Syst\xe8me"})[e]||e,R=e=>{if(e&&e.status_code){let s=e.status_code;if(s>=200&&s<300)return(0,r.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:["✓ ",s]});if(s>=400&&s<500)return(0,r.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:["⚠ ",s]});if(s>=500)return(0,r.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:["✗ ",s]})}return null};return T?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,r.jsx)("div",{className:"p-6 border-b",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Historique des Actions"}),(0,r.jsxs)("p",{className:"text-gray-600 mt-1",children:[t.length," log",1!==t.length?"s":""," trouv\xe9",1!==t.length?"s":""]})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,r.jsxs)(f.$,{variant:"outline",onClick:w,className:"flex items-center gap-2",children:[(0,r.jsx)(m.A,{size:16}),"Actualiser"]})})]})}),(0,r.jsxs)("div",{className:"p-6 border-b bg-gray-50",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(p,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Rechercher...",className:"w-full pl-10 pr-3 py-2 border rounded-md text-sm",value:_.search,onChange:e=>I("search",e.target.value)})]}),(0,r.jsxs)("select",{className:"border rounded px-3 py-2 text-sm",value:_.action,onChange:e=>I("action",e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Toutes les actions"}),Object.values(E).map(e=>(0,r.jsx)("option",{value:e,children:L(e)},e))]}),(0,r.jsxs)("select",{className:"border rounded px-3 py-2 text-sm",value:_.method,onChange:e=>I("method",e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Toutes les m\xe9thodes"}),Object.values(A).map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(h,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,r.jsx)("input",{type:"date",className:"w-full pl-10 pr-3 py-2 border rounded-md text-sm",value:_.startDate,onChange:e=>I("startDate",e.target.value)})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(h,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,r.jsx)("input",{type:"date",className:"w-full pl-10 pr-3 py-2 border rounded-md text-sm",value:_.endDate,onChange:e=>I("endDate",e.target.value)})]})]}),(_.action||_.method||_.search||_.startDate||_.endDate)&&(0,r.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[(0,r.jsx)(g,{size:16,className:"text-gray-400"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Filtres actifs"}),(0,r.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>{S({action:"",search:"",startDate:"",endDate:"",userId:"",method:""})},className:"text-blue-600 hover:text-blue-700",children:"Tout effacer"})]})]}),(0,r.jsx)("div",{className:"p-6",children:k?(0,r.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===t.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(x,{size:48,className:"mx-auto text-gray-400 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun log trouv\xe9"}),(0,r.jsx)("p",{className:"text-gray-600",children:0===e.length?"Aucune action n'a encore \xe9t\xe9 enregistr\xe9e.":"Aucun log ne correspond \xe0 vos crit\xe8res de recherche."})]}):(0,r.jsx)("div",{className:"space-y-4",children:t.map((e,s)=>(0,r.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[U(e.action),(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:L(e.action)}),q(e.method),R(e.context)]}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.timestamp).toLocaleString("fr-FR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),(0,r.jsx)("p",{className:"text-gray-800 mb-3",children:e.message}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-3",children:[e.user_email&&"anonymous"!==e.user_email&&(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(y,{size:14}),e.user_email]}),e.user_id&&"guest"!==e.user_id&&(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(d,{size:14}),"ID: ",e.user_id]}),e.ip_address&&(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(j,{size:14}),e.ip_address]}),e.user_agent&&(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(v,{size:14}),e.user_agent.length>30?`${e.user_agent.substring(0,30)}...`:e.user_agent]})]}),e.context&&Object.keys(e.context).length>0&&(0,r.jsxs)("details",{className:"mt-2",children:[(0,r.jsx)("summary",{className:"text-sm text-blue-600 cursor-pointer hover:text-blue-700",children:"D\xe9tails techniques"}),(0,r.jsx)("pre",{className:"mt-2 p-3 bg-gray-100 rounded text-xs overflow-x-auto",children:JSON.stringify(e.context,null,2)})]})]},`${e.timestamp}-${s}`))})})]}):(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 text-center",children:[(0,r.jsx)(u,{size:48,className:"mx-auto text-yellow-500 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Acc\xe8s restreint"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Vous n'avez pas les permissions n\xe9cessaires pour acc\xe9der aux logs."})]})}var S=t(99154),k=t(21891),P=t(51317),T=t(56367);let D=()=>(0,r.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,r.jsx)(S.A,{}),(0,r.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,r.jsx)(k.A,{}),(0,r.jsx)("main",{className:"flex-1 p-6 overflow-auto",children:(0,r.jsx)("div",{className:"container mx-auto",children:(0,r.jsx)(_,{})})}),(0,r.jsx)(P.A,{})]})]});function w(){return(0,r.jsx)(T.A,{children:(0,r.jsx)(D,{})})}},54379:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Doc\\\\user-management-frontend\\\\src\\\\app\\\\dashboard\\\\logs\\\\page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Doc\\user-management-frontend\\src\\app\\dashboard\\logs\\page.jsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63143:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},68655:(e,s,t)=>{Promise.resolve().then(t.bind(t,54379))},74075:e=>{"use strict";e.exports=require("zlib")},76903:(e,s,t)=>{Promise.resolve().then(t.bind(t,40018))},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},88233:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[825,873,653],()=>t(2236));module.exports=r})();